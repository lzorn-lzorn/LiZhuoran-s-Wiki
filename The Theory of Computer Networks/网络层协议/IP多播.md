# IP多播
多播，也就是一次性给多个目标发送报文，这种方式实际上比单播更节约资源，因为单播实际上要复制，而多播不需要 (这是有多播路由器的硬件支持的)
![[IP多播.png]] 在IPv4中可以使用D类地址, 也就是地址前四位是1110，其地址范围是：244.0.0. 0-239.255.255.255 (多播地址只能作为目的地址而不能作为源地址)其中每个地址就是一个多播组，即D类地址一共可以有 $2^{28}$ 个多播组。其使用的是 IGMP 协议

这里没有刻意强调广播的概念, 其原因是在IPv6中已经不存在广播这个概念了, 所谓广播实际上是一种特殊的多播

# 局域网上的硬件多播
互联网号码指派局IANA拥有的以太网地址块的高24位为 00-00-5E，所以TCP/IP协议使用的以太网多播地址的范围 00-00-5E-00-00-00 到 00-00-5E-FF-FF-FF。以太网硬件地址中的第一个字节的最低位为1即是多播地址 (见. [[以太网]])。即IANA拥有的多播地址为01-00-5E-00-00-00 到 01-00-5E-7F-FF-FF. 在这其中只有23位可以作用于多播。总的来说, **组播的MAC地址以十六进制的01-00-5E打头**. 而D类IP地址可供分配的有28位。同时这里有一个问题，即224.128.64.32 和 224.0.64.32 对应的以太网多播地址都是 01-00-5E-00-40-20. 所以多播的IP地址和以太网硬件地址不是一一对应的。这个问题需要在网络层进行过滤
![[IP多播地址和以太网地址的对应.png]]
# IGMP协议和多播路由选择协议
实际上，[[网络组管理协议IGMP]] 只是控制本地主机加入和退出多播组而已。其不知道IP多播组包含的数据成员，也不知道这些成员分布在那些网络上。

所以仅依靠IGMP无法完成在互联网上多播，这需要让局域网上的多播路由器和互联网上的其他多播路由器协同工作，把多播数据报用最小代价传输给多播组成员，即使用[[多播路由选择协议]]。

实际上多播有关的路由选择协议是更加复杂的，因为实际情况是往往多播组成员加入和退出，也就是说网络的拓扑结构没有变化，但是多播组成员发生了变化。

