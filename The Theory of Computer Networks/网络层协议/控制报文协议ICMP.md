# ICMP 报文
网际控制协议(Internet Control Message Protocol. IGMP) 协议是路由器向主机进行报错而使用的协议
![[ICPM报文.png]]
ICMP 报文有两种, 即ICMP差错报文和ICMP询问报文。ICMP报文的前4个字节是同意的：类型，代码，检验和；之后的4个字节的内容和ICMP的类型有关
![[ICMP报文类型.png]]
其整个报文结构为：
![[ICMP报文结构.png]]
对于以下情况不发送ICMP报文：
1. ICMP报文出错就不在发送ICMP报文
2. 对第一个分片的数据报之后的所有数据报都不发送ICMP差错报文
3. 对多播地址不发ICMP报文
4. 对特殊地址 (127.0.0.0 ~ 0.0.0.0) 的数据报, 不发生ICMP报文

# ICMP 询问报文
1. 会送请求和回答：ICMP 回送请求报文时由主机或者路由器向一个特定的目的主机发出的询问。收到此报文的主机必须给源主机或路由器发送ICMP回送回答报文。
2. 时间戳请求和回答：ICMP 时间戳请求报文时请某台主机或者路由器回答当前日期和时间