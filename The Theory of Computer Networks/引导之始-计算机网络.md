# 物理层

## [[有线传输介质]]

## 无线传输
无线通信的原理是, 一根天线连接到电路上, 发出电磁波。该电磁波能被一定范围内的接收者接收到。
在真空中, 电磁波按光速传播, 但是在铜线或者光纤中只有大约 2/3 的速度
由于其频率 $f$, 波长 $\lambda$ 和 光速 $c$ 的基本关系：
$$
\lambda f=c
$$
其中 $c$ 是一个常数, 所以知道 $\lambda$ 或者 $f$ 中的一个, 即可以算出另一个
频率由高到低, 分为:

|     |  $10^{4}\sim 10^8$ |  $10^{8}\sim 10^{10}$|  $10^{12}\sim 10^{14}$ |        |$10^{14}\sim 10^{16}$| $10^{16}\sim 10^{22}$ |               |
| --- | -------- | ---- | ------ | ------ | ------ | -------- | ------------- |
|     | 无线电波 | 微波 | 红外光 | 可见光 | 紫外光 | $X$ 射线 | $\gamma$ 射线 |

正如表格中所示, 可见光的频率实际上非常低, 而我们使用的通信频率是在无线电波段到紫外线波段。
其中 $10^{5}$ 为LF, $10^{6}$ 为MF, $10^{7}$ 为HF, $10^{8}$ 为VHF, $10^{9}$ 为UHF, $10^{10}$ 为SHF, $10^{11}$ 为EHF, $10^{12}$ 为THF

双绞线, 同轴电缆, AM无线电, FM无线电, 电视都是在 $10^{4}$ 到 $10^{9}$ 频段的, 卫星和地面微波在 $10^9$ 到 $10^{11}$ 频段, 而光纤是在 $10^{14}$ 到 $10^{15}$ 频段。所以大部分的信息传输都在比较窄的频段, 实际上也有技术可能做到在较快的频段传输信息：
- 调频扩频(Frequency hopping spread spectrum)
- 直接序列扩频 (Direct squence spread spectrum)
- 超宽频带(Ultra-WideBand，UWB)


<b>无线电频率(Radio Frequency, RF)</b>  :
波形容易产生, 传输距离远, 穿透能力强。
具体来说, 低频的无线电穿透能力随着距离信号源越远而越弱($1/r^2$ 量级衰减)这个 现象称作 <b>路径损耗(Path loss)</b> 同时低频的无线电是沿着地面传播的
高频的无线电遇到障碍物会反弹, 而且高频无线电更容易被雨水, 障碍物吸收。
而且所有频率的无线电波都会被电气设备影响。高频的无线电是沿着直线传播的, 以为有高频无线电会沿着直线直射到电离层然后被电离层反弹回来

<b>微波传输</b>
微波是定向传输, 所以每隔一段距离就需要一个信号塔作为中继器, 同时微波塔高度越高, 微波传输就越远, 因为地球本身也会阻挡微波。
同时不同于无线电, 微波的穿透能力很弱, 而且即便是发射将其汇集成束发射, 在大气中还是会发散。而有的微波还会被较低的大气折射, 从而比直接发射的微波还更慢抵达, 同时这两种微波不相同所以会抵消信号，这种传输效果被称之为<b>多径衰减(multipath fading)</b>
对于希望有更高数据传输率的需求来说, 势必会往更高的频段发展(更高的传输速率和带宽成正比-香浓定理, 高频信号有更多带宽资源)。但是高频(4GHz)以上就会出现微波很容易为雨水等障碍吸收, 微波的波长太短了。

<b>红外传输</b>
红外传输广泛用于短距离传输。由于其方向性, 便宜常常作为遥控器等电气设备的传输信息的解决方案, 但是红外线不能穿过固体。<b>一个波越接近可见光其特性也越接近可见光，而越来越不想无线电</b>。正是因为这个原因他也非常适合作为遥控器传输信号的载体, 这样这个房间的信号就不会干扰到别的房间

![[频谱传输.png]]

接下来我们会具体讲解一些[[通信基础]]，其中包括
- 数学基本原理(傅里叶变换) 
- 奈氏准则与香农定理
- <b>调制(modulation)</b>与<b>解调(demodulation)</b>: 调制与解调对应是模拟信号到数字信号的转换, 将模式信号调制成数字信号, 将数字信号解调为模拟信号。其中不同的情况使用不同的解决方案
	- 基带传输(Baseband Transmission): 基带传输是指直接传输原始信号，而不经过调制的方式。信号通常以其原始频率在信道中传输，适用于短距离传输，如局域网（LAN）中的以太网通信。基带传输使用的是数字信号，可以通过传输线或光纤直接发送，且信号的带宽一般与传输介质的带宽相匹配。简单来说: <b>直接传输原始信号，适用于短距离通信, 更多的用于有线介质</b>。
	- 通带传输(Passband transmission): 通带传输是指将信号调制到一个特定的频带内，以便通过信道进行传输的方式。通常，这种方式会将低频信号调制为高频信号，以适应无线电波传播或光纤传输的特性。通带传输常用于无线通信、电视广播和卫星通信等领域。其调制方式可以是幅度调制（AM）、频率调制（FM）或相位调制（PM）等。简单来说:<b>将信号调制到特定频带内进行传输，适用于长距离通信, 更多的用于无线介质</b>。 
- <b>多路复用(multiplexing)</b>: 往往多个信号都要使用同一根信道, 共享信道也是就我们常说的多路复用技术


 
## 通信基础
[[通信基础]]这一部分是基于一些通信原理和信息论的内容，其向讨论的目标内容我们的信息应该如何在信道上传输，我们的限制在哪里，我们应该如何对我们的信息进行编码以及如何高效的复用我们的信道
## 网络类型
### [[电话交换网络]]

### [[蜂窝网络]]

### [[有线电视]]


## [[卫星通信]] 

# 数据链路层
笔记目录：
- [[封装成帧]]
- [[纠错码]]
### 数据链路层的宏观设计
数据链路层的目标是：
1. 封装物理层的服务为网络层提供一个更好接口
2. 封装物理层的字节流, 将其[[封装成帧]]，并提供组装和拆卸的功能
3. 检测和纠正传输错误
4. 调节数据流，接受慢的设备不会被海量数据淹没

对于1. 而言，数据链路层需要封装物理层的服务，使得网络层无法看到物理层，其仿佛一条虚拟的路径
![[数据链路向网络层提供的虚拟链路服务.excalidraw|800]]
具体而言数据链路层提供三种可能的服务：
- 无确认的无连接服务：目标主机不确认，不检查，不恢复帧，不建立连接，也不释放连接 ⇒ 错误率低：以太网
- 有确认的无连接服务：目标主机会确认帧是否收到，但是依旧不建立连接 ⇒ 不可靠信道：无线系统 IEEE802.11 (WiFi)
- 有确认的面向连接的服务: 目标主机不仅会确认帧保证真正收到，还要保证其有序到达 ⇒ 长距离且不可靠：卫星通信

在现实的信道传输过程中，在途的信息很有可能收到干扰从而被意外地改变或者由于硬件故障而导致帧在链路中丢失。但是为了可靠的服务我们必须去应对这种情况。
1. 帧丢失：为了应对一个帧在信道中丢失，发送方可以在发送一帧的同时启动一个<b>计时器</b>，如果计时器超时还没有确认返回就意味着帧丢失。
2. 帧重复：一旦丢失就要重新发送，但是如果接收端收到了多个同样的帧，就会多次提交。所以数据链路层还会给每个帧一个<b>序号</b>。

在现实的情况中往往会出现发送和接受速率完全不匹配设备。此时接受慢的很可能会被海量数据淹没从而丢失数据。此时数据链路层需要一定的流量控制机制。
一般来说，流量控制的方式有两种：
- <b>基于反馈的流量控制(feedback-based flow control)</b>: 接收方允许之后发送方才能继续发
- <b>基于速率的流量控制(rate-based flow control)</b>: 限制发送方的发送速率无需等待接收方的反馈

基于速率的流量控制往往是运输层会使用的，而基于反馈的则会被同时使用。
以上给出的问题和方式只是一个大致的思路, 因为错误检测和流量检测不仅仅是数据链路层提供的，更多需要上层的参与。所以更多的细节会在后续(传输层)展开。
### 错误检测和纠正
网络中的错误大致有以下几种情况：
- 比特差错：0 → 1, 1 → 0；也可能突然错一大堆
- 擦除信道：一个比特丢失，物理层能检测出来

以下我们介绍的是相对一般的纠错和检错方式, 它们不仅仅可以用于网络中，还可以用于对内存数据的检测等。
在网络的错误处理中有两种策略：
1. 可以修改错误：[[纠错码]](error-correcting code)，用于不可靠的信道
2. 可以发现错误：[[检错码]] (error-detecting code)，用于无线信道，高可靠信道(光纤)
## 数据链路层协议算法
在本节采用以下方式进行描述：正文部分从头设计一套基本的协议算法用于处理一些网络情况。如果希望直接得到结果，则直接在[[数据链路层协议算法]]中查看 停止等待协议, 后退N帧协议以及选择重传协议SR

Utopia：一个最简单最理想的通信协议：
```C
typedef enum { frame_arrival } event_type;
void sender(){
	frame s;
	packet buffer;
	while(true){
		from_network_layer(&buffer);
		s.info = buffer;
		to_physical_layer(&s);
	}
}
void receiver(){
	frame r;
	event_type event;
	while(true){
		wait_for_event(&event);
		from_physical_layer(&r);
		to_network_layer(&r.info);
	}
}
```
这是一个在单向传输数据(单工通信)， 发送方和接收方永远处于准备就绪状态(while(true))，不计处理时间，缓冲区无限大，同时不会出现丢帧和坏帧等问题的情况才能正常工作的Utopia协议.

<b>流量控制：停止-等待协议</b>
增加一个流量控制的方式：发送方发一帧然后等待接收方确认(非常短的哑帧)，然后才能继续发送
```C
typedef enum { frame_arrival } event_type;
void sender(){
	frame s;
	packet buffer;
	event_type event;
	while(true){
		from_network_layer(&buffer);
		s.info = buffer;
		to_physical_layer(&s);
		wait_for_event(&event); // wait
	}
}
void receiver(){
	frame r;
	event_type event;
	while(true){
		wait_for_event(&event);
		from_physical_layer(&r);
		to_network_layer(&r.info);
		to_phyiscal_layer(&s); // 向sent发一个哑帧
		}
}
```

<b>错误处理：序号和ARQ</b>

## 数据链路层协议实例

### SONET


### ADSL

### DOCSIS-PHY层

## 介质访问控制 MAC子层

### [[多路访问协议]]

### [[以太网]]


### [[无线LAN]]

### [[蓝牙]]


### DOCSIS-MAC子层

### [[数据链路交换]]



# 网络层
## 网络层的设计

## 单个网络中的路由算法

### 最短路径算法

### 洪泛算法


### 距离向量路由算法


### 链路状态路由算法

### 网络内的路由算法

### 广播路由算法

### 多播路由算法


### 任播路由算法

## 网络层的流量管理

## 网络互联


## 软件定义网络(SDN)

## 路由协议
### IPv4 和 IPv6

### Internet 控制协议


### 多协议标签交换 MPLS

# 传输层

## 传输层的总体设计
### 传输服务

### 传输协议的要素

## [[拥塞控制]]


## [[控制传输协议TCP]]



## [[用户数据报协议UDP]]


## 性能检测


# 应用层
## [[域名查询协议DNS]]

## [[电子邮件]]


## 万维网
### Web

### [[超文本传输协议HTTP]]

## Web 隐私

## 流式音频

## 内容分发

# 网络安全